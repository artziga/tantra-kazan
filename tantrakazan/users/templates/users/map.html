{% load static %}
{% block map %}

<script type="text/javascript">
    // Функция ymaps.ready() будет вызвана, когда
    // загрузятся все компоненты API, а также когда будет готово DOM-дерево.
    ymaps.ready(init);
    function init() {
    var myMap = new ymaps.Map("map", {
            center: [55.823462, 49.131547],
            zoom: 13
        }, {
            searchControlProvider: 'yandex#search'
        });


{% for specialist in specialists %}

            // Создаём макет содержимого.
MyIconContentLayout = ymaps.templateLayoutFactory.createClass(
    '<div style="width: 50px; height: 50px; border-radius: 50%; overflow: hidden;"><img src="{{ specialist.avatar.mini_thumbnail.url }}" alt="" style="width: 100%; height: 100%; object-fit: cover;"></div>'
),


myPlacemark = new ymaps.Placemark(
    {{specialist.therapist_profile.point}},
    {
        hintContent: '{{ specialist.therapist_profile.address }}',
        balloonContent: '{{ specialist }}',

    },
    {
        iconLayout: 'default#imageWithContent',
        iconImageSize: [50, 50],
        iconImageOffset: [-15, -15],
        iconContentLayout: MyIconContentLayout
    }
);



    myMap.geoObjects
        .add(myPlacemark);
        {% endfor %}

}
</script>
{% endblock map %}

